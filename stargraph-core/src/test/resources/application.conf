
# Be aware.
# Used for the IT.
#
# Override via System properties if needed.
# Example: -Dstargraph.elastic.cluster-name=MyCluster.
# This configuration is merged during runtime with reference.conf.
#

processor = {
  localhost-coref-processor = {
    graphene {
      coreference {
        url = "http://localhost:5128/resolve"
        text-path = "text"
        wiki-path = "wiki"
        wiki-link-path = "link"
      }
    }
  }
}

stargraph = {



  data.root-dir = "/home/viktor/stargraph-data"

  progress-watcher.log-stats = no

  kb.dbpedia-2016 = {
    triple-store.hdt.use-index = yes
  }

  kb.extend = {
    enabled = yes
    language = EN

    namespaces = {
      lambda3: "http://lambda3.org/",
      people: "http://ppl.org/"
    }

    model.facts = {
      provider.class = net.stargraph.core.FactProviderFactory
    }
    model.entities = {
      provider.class = net.stargraph.core.EntityProviderFactory
    }
    model.properties = {
      provider.class = net.stargraph.core.PropertyProviderFactory
    }
    elastic = ${stargraph.elastic}
    verbose = yes
  }

  kb.mytest = {
    enabled = yes
    language = EN

    model.mytype = {
      provider.class = net.stargraph.test.TestDataProviderFactory
      provider.args.data = [
        {text: "One", failOnIndexer: false, failOnProvider: false},
        {text: "Two", failOnIndexer: false, failOnProvider: false},
        {text: "Three", failOnIndexer: false, failOnProvider: false},
      ]
      elastic = ${stargraph.elastic}
      verbose = yes
    }
  }


  kb.simple = {
    enabled = yes
    language = EN

    triple-store.namespace.mapping = default

    namespaces = {
      dbr: "http://dbpedia.org/resource/"
    }

    model.facts = {
      provider.class = net.stargraph.core.FactProviderFactory

      processors = [
        {
          regex-filter: ${processor.regex-filter}
          regex-filter.s = [
            "^http://dbpedia.org/example/File(.*)$"
          ]

          regex-filter.p = [
            "^foaf:thumbnail$",
            "^dbo:wikiPageID$"
          ]
        },
        {entity-classifier: ${processor.entity-classifier}},
      ]

      elastic = ${stargraph.elastic}
    }

    model.entities = {
      provider.class = net.stargraph.core.EntityProviderFactory
      processors = [
        {
          sink-duplicate: ${processor.sink-duplicate}
        },
      ]
      elastic = ${stargraph.elastic}
    }
  }
  kb.obama = {
    model.documents = {
      processors = [
        {
          passage-processor: {}
        }
      ]
    }
  }
  kb.lucene-obama = {
    enabled = yes
    language = EN

    namespaces = {
      dbr: "http://dbpedia.org/resource/"
    }

    triple-store.namespace.mapping = default

    triple-store.hdt.file = "http://data.lambda3.org/obama.hdt"
    triple-store.hdt.use-index = no

    //    model.facts = {
    //      provider.class = net.stargraph.core.FactProviderFactory
    //
    //      processors = [
    //        {
    //          length-filter: ${processor.length-filter}
    //        },
    //        {
    //          entity-classifier: ${processor.entity-classifier}
    //        },
    //        {
    //          regex-filter: ${processor.regex-filter}
    //        },
    //      ]
    //
    //      elastic = ${stargraph.elastic}
    //    }

    model.entities = {
      provider.class = net.stargraph.core.EntityProviderFactory
      # For testing purposes, we use lucene
      index-store.factory.class = net.stargraph.core.impl.lucene.LuceneFactory

      processors = [
        {
          length-filter: ${processor.length-filter}
        },
        {
          sink-duplicate: ${processor.sink-duplicate}
        },
      ]
      elastic = ${stargraph.elastic}
    }

    //    model.relations = {
    //      provider.class = net.stargraph.core.PropertyProviderFactory
    //
    //      processors = [
    //        {
    //          length-filter: ${processor.length-filter}
    //        },
    //        {
    //          stop-property-filter: ${processor.stop-property-filter}
    //        },
    //        {
    //          sink-duplicate: ${processor.sink-duplicate}
    //        },
    //        {
    //          wordnet: ${processor.wordnet}
    //        },
    //      ]
    //
    //      elastic = ${stargraph.elastic}
    //    }

    //    model.documents = {
    //      provider.class = net.stargraph.core.DocumentProviderFactory
    //
    //      processors = [
    //        {
    //          coref-processor: ${processor.coref-processor}
    //        },
    //        {
    //          passage-processor: {}
    //        }
    //      ]
    //
    //      elastic = ${stargraph.elastic}
    //    }
  }

  kb.lucene-dbpedia = {
    enabled = yes
    language = EN

    namespaces = {
      dbr: "http://dbpedia.org/resource/"
    }

    triple-store.namespace.mapping = default

    triple-store.hdt.file = "http://data.lambda3.org/dbpedia_en-2016.hdt"
    triple-store.hdt.use-index = yes



    model.entities = {
      provider.class = net.stargraph.core.EntityProviderFactory
      # For testing purposes, we use lucene
      index-store.factory.class = net.stargraph.core.impl.lucene.LuceneFactory

      processors = [
        {
          length-filter: ${processor.length-filter}
        },
        {
          sink-duplicate: ${processor.sink-duplicate}
        },
      ]


      elastic = ${stargraph.elastic}
    }

    model.documents = {
      provider.class = net.stargraph.core.DocumentProviderFactory

      processors = [
        {
          coref-processor: ${processor.localhost-coref-processor}
        },
        {
          passage-processor: {}
        }
      ]

      elastic = ${stargraph.elastic}
    }
  }
}